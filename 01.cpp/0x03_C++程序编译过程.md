### 代码编译过程(八股)
1. 预编译。

   `#define`宏定义替换、`#if #ifdef`条件编译过滤不必要代码、处理头文件`#include`、过滤注释、得到「不包含#指令的.i文件」。

2. 编译、优化

   通过词法分析和语法分析，在确认所有的指令都符合语法规则之后，将其翻译成等价的中间代码表示或汇编代码。`.i`文件变异成`.s`文件

3. 汇编

   将汇编代码生成机器指令。这个过程生成目标文件（.obj .o等）目标文件由段组成，通常至少有两个段：

   - 代码段  ---  包换主要程序的指令。该段是可读和可执行的，一般不可写。

   - 数据段  ---  存放程序用到的全局变量或静态数据。读、写、执行均可。

4. 链接

   将不同的源文件产生的目标文件进行链接，从而形成一个可以执行的程序。

> 动态链接&静态链接

#### 静态链接

代码从其所在的静态链接库中拷贝到最终的可执行程序中，在该程序被执行时，这些代码会被装入到该进程的虚拟地址空间中。

##### 特点

- 浪费空间  ---  为每个可执行程序中对所有需要的目标文件都要有一份副本。（多个程序引同一文件时，复用性差）
- 更新困难  ---  库函数更改，则应用需要重新进行编译链接生成可执行程序。
- 运行速度快  ---  所需要的代码已经拷贝到相应位置，程序可直接运行。

#### 动态链接

把程序按照模块拆分成各个相对独立部分，在程序运行时才将它们链接在一起形成一个完整的程序。

##### 特点

- 共享库(节省内存)  ---  多个程序在执行时共享依赖库的同一份副本。
- 便于更新  ---  只需要替换原来的目标文件，无需将所有的程序再重新链接一遍。
- 性能较差  ---  在程序运行时，每次执行都需要链接，相比静态链接会有一定的性能损失。