## Formal language

### 1. 形式语言的定义

#### 定义：

- 形式语言是符号串的集合；
- 形式语言是**字母表**上的符号按照一定的 **规则(词法、语法、语义)** 组成的所有符号串集合；其中每个符号串称为一个句子。

![形式语言](images\形式语言.png)



#### 符号串运算

- 包括连接、或、方幂、闭包(正闭包、星闭包)。

![符号串运算](images\符号串运算.png)



#### 符号串集合的运算

- 包括乘积 (自由组合)、和 (两个集合中的元素放在一起)、方幂、闭包；
- 若A为任一字母表，则A的星闭包是该字母表上所有符号串(包括空串)集合，且没有任何限制。

![符号串集合的运算](images\符号串集合的运算.png)

### 2. 形式语言是由文法定义的

- 形式语言是符号串的集合，对形式语言的描述有两种方式: 枚举方式、使用文法。

![形式语言的两种表现形式](images\形式语言的两种表现形式.png)



#### 什么是文法

- 定义如下：

![什么是文法](images\什么是文法.png)



- 举例如下：

![文法举例](images\文法举例.png)



#### 文法是怎样定义语言的

(1) 定义：

- 一个文法所定义的语言，就是由该文法 **开始符号推导出** 的所有 **仅含终结符** 的所有 **符号串** 之集合。其中的每个符号串皆称为句子。

(2) 流程：

- 从开始符号出发，对符号串中的定义对象，采用推导的方法（用其规则右部替换左部）产生新的符号串，如此进行，直到新符号串中不再出现定义的对象为止，则最终的符号串就是一个句子。

(2) 举例：

- 标识符的文法：只能由数字和字母组成，该文法用来描述一个语言中词法规则的；
- 简单算术表达式文法：该文法用来描述一个语言中语法规则的。



#### 形式语言的分类

Chomsky把形式语言分为四类，分别由四类文法定义：四类文法的区别在于产生式的形式不同。

(1) 0型语言

- 0型语言由0型文法定义，又称为无限制文法，产生式形式及要求如下。

![0型语言](images\0型语言.png)



(2) 1型语言

- 1型语言由1型文法定义；
- α 和 β 是 A替换为u 的上下文，因此又称为上下文有关文法，产生式形式及要求如下。

![1型语言](images\1型语言.png)



(3) 2型语言

- 2型语言是由2型文法定义，又称为上下文无关文法，产生式形式及要求如下；
- **语法分析** 使用该文法形式。

![2型语言](images\2型语言.png)



(4) 3型语言

- 3型语言是由3型文法定义，又称为正规文法，产生式形式及要求如下；
- **词法分析** 使用该文法形式。

![3型语言](images\3型语言.png)



### 3. 语法成分的定义

#### 文法的运算

文法有两种基本的运算：推导和归约。

(1) **推导**

- 直接推导、加推导、星推导。

(2) **规约**

- 直接规约 (是直接推导的逆运算) 、加规约 、星规约。

(3) 最左推导 和 最右推导

- 同一个句子可以通过不同的推导序列推导出来，通常只考虑两种特殊推导，即最左推导和最右推导；
- 实际的编译过程都是采用最左推导 或 最左归纳，因为对程序的扫描是从左到右进行的；
- 最左规约是最右推导的逆过程。



#### 句型、句子和语法树

(1) 句型

- 句型是由文法开始符号 **加推导** 出的任一符号串。

(2) 句子

- 句子是由开始符号 **加推导** 出的任一终结字符串。

(3) 语法树

- 句型 (句子) 产生过程的一种树结构表示；
- 树根：开始符号；树叶：给定的句型(句子)。

![句型、句子和语法树](images\句型、句子和语法树.png)



(4) 语法树的构造算法

- 子树：由某个节点连通所有分支组成的部分；
- 简单子树：仅具有单层分支的子树；

- 按照构造算法构造的语法树，其全体树叶(自左至右)恰好是给定的句型(句子)。

![语法树的构造算法](images\语法树的构造算法.png)



#### 短语、简单短语和句柄

(1) 短语

- 任一 **子树** 的树叶全体 (具有共同祖先的叶节点符号串) 皆为短语；

(2) 简单短语

- 任一 **简单子树** 的树叶全体 (具有共同父亲的叶节点符号串) 皆为简单短语；

(3) 句柄

- 一个句型的 **最左简单短语** 称为该句型的句柄，即所有的简单短语中最左侧的称为句柄。

短语、简单短语和句柄的例子如下。

![短语、简单短语和句柄](images\短语、简单短语和句柄.png)



### 4. 文法的等价变换

#### 文法的等价性

- 文法的等价性是指它们所定义的语言是一样的；
- 一个语言，其描述文法并不唯一。

![文法的等价性](images\文法的等价性.png)



#### 文法等价变化的方法

(1) 删除无用的产生式(文法的化简)

![删除无用的产生式](images\删除无用的产生式.png)



(2) 删除∈产生式

![删除∈产生式](images\删除∈产生式.png)





(3) BNF (巴科斯范式) 表示法

基本思想：扩展文法，引进新的描述符号：()圆括号、[ ]方括号、{ }花括号。



a. 必选项法(圆括号法)

- 此法又称提公因子法，利用此法可以解决：具有相同左部的各产生式首符号不同;
- 主要用于语法分析。



b. 可选项法(方括号法)

![可选项法(方括号法)](images\可选项法(方括号法).png)



c. 重复可选项法(花括号法)

- 和星闭包基本是同一概念。

![重复可选项法](images\重复可选项法.png)
