# 语义分析

### 1. 中间代码的设计

**语义分析的步骤**：静态语义审查、如果静态语义正确，生成中间代码。

#### 1.1 静态语义分析

**静态语义分析包含的内容**

(1) 类型检查

- 条件表达式的类型是不是布尔型
- 验证指针地址访问只作用于指针
- 函数必须有正确的参数个数和参数类型

(2) 控制流检查

- break语句是否有转向点

(3)一致性检查

- 在相同作用域中标识符只能说明一次



#### 1.2 中间代码

(1) 中间代码是高级程序语言中，各种语法成分的语义结构表示，它介于源语言和目标语言之间。

(2) 中间代码设置的目的

- 便于进行与机器无关的代码优化；
- 使编译程序改变目标机更容易；
- 使编译程序的结构在逻辑上更为简单明确，以中间语言为界面，编译前端和后端的接口更清晰。



#### 1.3 常用的中间代码形式

![中间代码形式](images\中间代码形式.png)



#### 1.4 语法成分的四元式设计

表达式、赋值语句、条件语句、while循环的四元式。



### 2. 属性文法

**(1) 属性文法定义**

- 属性文法是上下文无关文法在语义上的扩展，是一种接近形式化的语义描述方法；
- 可定义为如下三元组 A=(G, V,E) 其中G为文法，V为属性集，E为语义规则集；



**(2) 属性定义**

- 属性代表与文法符号相关的信息，这里主要指语义信息(类型、种类、值和值地址等)
- 文法产生式中的每个文法符号都附有若干个这样的属性。
- 属性可以进行计算和传递，语义规则就是在同一产生式中，相互关联的属性求值规则。
