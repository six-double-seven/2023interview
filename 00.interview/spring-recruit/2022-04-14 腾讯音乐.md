# 1.[进程间通信](https://www.jianshu.com/p/c1015f5ffa74)

## 1.1 什么是进程间通信IPC

- 每个进程各自有不同的用户地址空间，任何一个进程的全局变量在另一个进程中都看不到，所以进程之间要交换数据必须通过**内核**；
- 在内核中开辟一块缓冲区，进程1把数据从**用户空间**拷到**内核缓冲区**，进程2再从内核缓冲区把数据读走，内核提供的这种机制称为**进程间通信（IPC，InterProcess Communication）**

## 1.2 常见的进程间通信方式

- 主要分为两大类 共享内存和消息传递

![image-20220414194920229](http://six-double-seven.oss-cn-beijing.aliyuncs.com/img/image-20220414194920229.png)

### 1.2.1 共享内存(Shared memory)

- 使得多个进程可以直接读写同一块内存空间，是最快的可用IPC形式，是针对其他通信机制运行效率较低而设计的。
- 由于多个进程共享一段内存，因此需要依靠某种同步机制（如信号量）来达到进程间的同步及互斥。
- **信号量(Semaphores)** ：信号量是一个计数器，用于多进程对共享数据的访问，信号量的意图在于进程间同步。这种通信方式主要用于解决与同步相关的问题并避免竞争条件。

### 1.2.2 消息传递(管道和消息队列)

>管道的实质

- 管道是用于连接一个读进程和一个写进程以实现它们之间通信的一个共享文件，又名pipe文件。写进程以字符流形式将大量的数据写入管道；即读进程则从管道中接收数据。

>匿名管道的局限性

- 只支持单向数据流
- 只能用于亲缘关系的进程之间
- 管道的缓冲区有限

>有名管道(FIFO)

- 提供了一个**路径名**和有名管道关联，有名管道的名字存在于文件系统中，内容存放在内存中；
- 即使与有名管道的创建进程不存在亲缘关系的进程，只要可以访问该路径，就能够彼此通过有名管道相互通信，因此，通过有名管道不相关的进程也能交换数据；
- 有名管道严格遵循**先进先出(FIFO)**，对匿名管道及有名管道的读总是从开始处返回数据，对它们的写则把数据添加到末尾

> 消息(Message)队列

- 消息队列是存放在**内核**中的消息链表，每个消息队列由消息队列标识符表示。
- 管道和消息队列的通信数据都是先进先出的原则
- 与管道不同的是消息队列存放在内核中，只有在内核重启(即，操作系统重启)或者显示地删除一个消息队列时，该消息队列才会被真正的删除。
- 消息队列在某个进程往一个队列写入消息之前，并不需要另外某个进程在该队列上等待消息的到达

### 1.2.3 套接字

- 主要用于在客户端和服务器之间通过网络进行通信
- 套接字是支持 TCP/IP 的网络通信的基本操作单元，可以看做是不同主机之间的进程进行双向通信的端点，简单的说就是通信双方的一种约定，用套接字中的相关函数来完成通信过程。

# 2.如何解决死锁

>处理死锁的思路

- 预防死锁：破坏四个必要条件(互斥、持有并等待、非抢占、循环等待)中的一个或者多个来预防死锁；
- 避免死锁：在分配资源之前进行判断，只允许不会产生死锁的进程获得资源；
- 检测死锁：指系统设有**专门的机构**，当死锁发生时，该机构能够检测死锁的发生，并精确地确定与死锁有关的进程和资源。
- 解除死锁：
  - **立即结束所有进程的执行，重新启动操作系统** ：这种方法简单，但以前所在的工作全部作废，损失很大。
  - **撤销涉及死锁的所有进程，解除死锁后继续运行** ：这种方法能彻底打破**死锁的循环等待**条件，但将付出很大代价，例如有些进程可能已经计算了很长时间，由于被撤销而使产生的部分结果也被消除了，再重新执行时还要再次进行计算。
  - **逐个撤销涉及死锁的进程，回收其资源直至死锁解除。**
  - **抢占资源** ：从涉及死锁的一个或几个进程中抢占资源，把夺得的资源再分配给涉及死锁的进程直至死锁解除

# 3.数据库索引(以Mysql为例)

>简介(什么是数据库索引)

- 索引是一种用于快速查询和检索数据的数据结构
- 常见的索引结构有: B 树， B+树和 Hash
- 索引的作用就相当于目录的作用。打个比方: 我们在查字典的时候，如果没有目录，那我们就只能一页一页的去找我们需要查的那个字，速度很慢。如果有目录了，我们只需要先去目录里查找字的位置，然后直接翻到那一页就行了。

> 索引的优缺点

**优点** ：

- 使用索引可以大大加快 数据的检索速度（大大减少检索的数据量）, 这也是创建索引的最主要的原因。
- 通过创建唯一性索引，可以保证数据库表中每一行数据的唯一性。

**缺点** ：

- 创建索引和维护索引需要耗费许多时间。当对表中的数据进行增删改的时候，如果数据有索引，那么索引也需要动态的修改，会降低 SQL 执行效率。
- 索引需要使用物理文件存储，也会耗费一定空间。

但是，**使用索引一定能提高查询性能吗?**

大多数情况下，索引查询都是比全表扫描要快的。但是如果数据库的数据量不大，那么使用索引也不一定能够带来很大提升。