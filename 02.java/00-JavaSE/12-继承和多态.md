# 1. 继承

## 1.1 作用

- 基本作用：子类继承父类，代码可以复用
- 重要作用：有了继承关系，才有了后期的**代码覆盖**和**多态机制**

## 1.2 相关特性

- B类继承A类，A是超类(superclass)、父类、基类，B是子类(subclass)
- 只支持单继承，加入A继承B，B继承C，则A间接继承C，产生间接继承的效果
- **构造方法**不能继承，私有属性无法在子类中直接访问(通过set和get进行访问)
- 默认继承Object类
- 继承会造成**耦合度较高**，父类修改子类也会更改

## 1.3 应用场景

- 凡是用 **is a** 描述的，是可以继承的；

# 2. 多态

>降低程序的耦合度，提高程序的扩展力

## 2.1 向上转型

- 两种类型之间必须有**继承关系**
- 子 ----> 父 (自动类型转换)

## 2.2 向下转型

- 两种类型之间必须有**继承关系**
- 父 ----> 子 (强制类型转换，需要**加强制类型转换符**)
- 想要访问的方法是**子类对象特有**的方法，必须进行强制向下转型

## 2.3 原理

从编译和运行两个阶段来说

```java
Animal bird = new Bird();
bird.move();
bird.fly();//fly()是Bird特有的方法，在向上转型的时候，编译报错，找不到fly()方法
```

>编译阶段

- 对于编译器来讲，只知道bird的类型是Animal，所以编译器在检查语法的时候去Animal.class找move()方法，绑定上move()方法，**静态绑定**成功

>运行阶段

- 运行阶段，实际在堆内存中创建的对象是Bird对象，所以move的时候真正参与move的对象是bird，所以运行阶段会动态执行Bird对象的move方法，属于运行阶段绑定，是**动态绑定**。

>多态

- 多态表示多种形态，编译的时候一种形态，运行时一种形态。
- 多态指的是 父类型引用指向子类型对象，包括编译阶段和运行阶段
  - 编译阶段  绑定父类的方法
  - 运行阶段  动态绑定子类型对象的方法

## 2.4 instanceof

> 向下转型的过程中 避免 ClassCastException 异常的发生

- 在运行阶段动态判断引用指向的对象的类型
- 语法：(引用 instanceof 类型)
- 运算结果只能是true/false
- 假设 `c instance of Cat` 为true，则说明c引用指向的堆内存中的java对象是一个Cat；
- 对类型进行向下转型时，一定要使用**instanceof**运算符进行判断，可以避免ClassCastException异常的发生

>为什么需要instanceof

- 其他人调用如下的test方法时，传入的参数可能是Bird，也可能是Cat，此时需要instanceof去判断

```java
public void test(Animal  a){
        
}
```